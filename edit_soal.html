<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor Soal Ujian</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="font-sans bg-gray-100">
    <main class="px-4 pb-8">
        <div class="max-w-7xl mx-auto">
            <!-- Page Title and Back Button -->
            <div class="mb-8 flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800 mb-2">Editor Soal Ujian</h1>
                    <p class="text-gray-600">Mata Kuliah: <span class="font-semibold text-indigo-600">Pengetahuan Umum</span></p>
                </div>
                <a 
                    href="dashboard.html"
                    class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:-translate-y-0.5 hover:shadow-lg"
                >
                    <span>‚Üê</span>
                    <span>Kembali ke Dashboard</span>
                </a>
            </div>

            <!-- Question List -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">üìã Daftar Soal</h3>
                <div class="flex flex-wrap gap-2">
                    <button onclick="selectQuestion(0)" class="question-btn px-4 py-2 rounded-lg border-2 border-indigo-600 bg-indigo-600 text-white transition-all duration-200">
                        Soal 1
                    </button>
                    <button onclick="selectQuestion(1)" class="question-btn px-4 py-2 rounded-lg border-2 border-gray-300 text-gray-700 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200">
                        Soal 2
                    </button>
                    <button onclick="selectQuestion(2)" class="question-btn px-4 py-2 rounded-lg border-2 border-gray-300 text-gray-700 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200">
                        Soal 3
                    </button>
                </div>
            </div>

            <!-- Grid Layout -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Left Column: Edit Form -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-6 flex items-center">
                        <span class="mr-2">‚úèÔ∏è</span>
                        Edit Soal
                    </h2>

                    <form class="space-y-6">
                        <!-- Question Field -->
                        <div>
                            <label for="question" class="block text-sm font-medium text-gray-700 mb-2">
                                Pertanyaan
                            </label>
                            <textarea 
                                id="question" 
                                rows="3" 
                                class="w-full border-gray-300 rounded-lg p-3 focus:ring-indigo-300 focus:border-indigo-300 transition-all duration-200 focus:-translate-y-px focus:shadow-md"
                                placeholder="Masukkan pertanyaan soal..."
                                oninput="updatePreview()"
                            >Apa ibu kota Indonesia?</textarea>
                        </div>

                        <!-- Answer Options -->
                        <div class="space-y-4">
                            <h3 class="text-sm font-medium text-gray-700">Pilihan Jawaban</h3>
                            
                            <!-- Option A -->
                            <div>
                                <label for="optionA" class="block text-sm font-medium text-gray-700 mb-1">
                                    Pilihan A
                                </label>
                                <input 
                                    type="text" 
                                    id="optionA" 
                                    class="w-full border-gray-300 rounded-lg bg-gray-50 p-2 focus:ring-indigo-300 focus:border-indigo-300 transition-all duration-200 focus:-translate-y-px focus:shadow-md"
                                    value="Surabaya"
                                    oninput="updatePreview()"
                                >
                            </div>

                            <!-- Option B (Correct) -->
                            <div>
                                <label for="optionB" class="block text-sm font-medium text-gray-700 mb-1">
                                    Pilihan B <span class="text-green-600 font-semibold">(Benar)</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="optionB" 
                                    class="w-full border-green-400 rounded-lg bg-green-50 p-2 focus:ring-green-300 focus:border-green-300 transition-all duration-200 focus:-translate-y-px focus:shadow-md"
                                    value="Jakarta"
                                    oninput="updatePreview()"
                                >
                            </div>

                            <!-- Option C -->
                            <div>
                                <label for="optionC" class="block text-sm font-medium text-gray-700 mb-1">
                                    Pilihan C
                                </label>
                                <input 
                                    type="text" 
                                    id="optionC" 
                                    class="w-full border-gray-300 rounded-lg bg-gray-50 p-2 focus:ring-indigo-300 focus:border-indigo-300 transition-all duration-200 focus:-translate-y-px focus:shadow-md"
                                    value="Bandung"
                                    oninput="updatePreview()"
                                >
                            </div>

                            <!-- Option D -->
                            <div>
                                <label for="optionD" class="block text-sm font-medium text-gray-700 mb-1">
                                    Pilihan D
                                </label>
                                <input 
                                    type="text" 
                                    id="optionD" 
                                    class="w-full border-gray-300 rounded-lg bg-gray-50 p-2 focus:ring-indigo-300 focus:border-indigo-300 transition-all duration-200 focus:-translate-y-px focus:shadow-md"
                                    value="Medan"
                                    oninput="updatePreview()"
                                >
                            </div>
                        </div>

                        <!-- Correct Answer Dropdown -->
                        <div>
                            <label for="correctAnswer" class="block text-sm font-medium text-gray-700 mb-2">
                                Jawaban Benar
                            </label>
                            <select 
                                id="correctAnswer" 
                                class="w-full border-gray-300 rounded-lg p-2 focus:ring-indigo-300 focus:border-indigo-300 transition-all duration-200"
                                onchange="updatePreview()"
                            >
                                <option value="A">A</option>
                                <option value="B" selected>B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                            </select>
                        </div>

                        <!-- Save Button -->
                        <div class="flex justify-end pt-4">
                            <button 
                                type="button" 
                                onclick="saveQuestion()"
                                class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg transition-all duration-200 flex items-center space-x-2 hover:-translate-y-0.5 hover:shadow-lg"
                            >
                                <span>üíæ</span>
                                <span>Simpan Perubahan</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Right Column: Preview -->
                <div class="bg-white rounded-xl shadow-lg p-6 animate-fadeIn">
                    <h2 class="text-lg font-semibold text-gray-800 mb-6 flex items-center">
                        <span class="mr-2">üëÄ</span>
                        Preview Soal
                    </h2>

                    <!-- Question Preview -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-indigo-600 mb-2">Soal</label>
                        <p id="previewQuestion" class="font-semibold text-gray-800 text-lg leading-relaxed">
                            Apa ibu kota Indonesia?
                        </p>
                    </div>

                    <!-- Answer Options Preview -->
                    <div class="space-y-3">
                        <label class="block text-sm font-medium text-indigo-600 mb-3">Pilihan Jawaban</label>
                        
                        <!-- Preview Option A -->
                        <div id="previewOptionA" class="border-gray-200 bg-gray-50 p-3 rounded-lg border transition-all duration-200">
                            <div class="flex items-center justify-between">
                                <span><strong>A.</strong> <span class="ml-2">Surabaya</span></span>
                            </div>
                        </div>

                        <!-- Preview Option B -->
                        <div id="previewOptionB" class="bg-gradient-to-r from-green-500 to-green-700 text-white p-3 rounded-lg border-green-500 border transition-all duration-200">
                            <div class="flex items-center justify-between">
                                <span><strong>B.</strong> <span class="ml-2">Jakarta</span></span>
                                <span class="text-sm font-medium">‚úì Benar</span>
                            </div>
                        </div>

                        <!-- Preview Option C -->
                        <div id="previewOptionC" class="border-gray-200 bg-gray-50 p-3 rounded-lg border transition-all duration-200">
                            <div class="flex items-center justify-between">
                                <span><strong>C.</strong> <span class="ml-2">Bandung</span></span>
                            </div>
                        </div>

                        <!-- Preview Option D -->
                        <div id="previewOptionD" class="border-gray-200 bg-gray-50 p-3 rounded-lg border transition-all duration-200">
                            <div class="flex items-center justify-between">
                                <span><strong>D.</strong> <span class="ml-2">Medan</span></span>
                            </div>
                        </div>
                    </div>

                    <!-- Question Navigation -->
                    <div class="mt-8 pt-6 border-t border-gray-200">
                        <div class="flex justify-between items-center">
                            <button onclick="previousQuestion()" class="nav-prev text-indigo-600 hover:text-indigo-700 font-medium text-sm transition-colors">
                                ‚Üê Soal Sebelumnya
                            </button>
                            <span class="question-counter text-sm text-gray-500">Soal 1 dari 3</span>
                            <button onclick="nextQuestion()" class="nav-next text-indigo-600 hover:text-indigo-700 font-medium text-sm transition-colors">
                                Soal Berikutnya ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal (Hidden initially) -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-sm mx-4 text-center transform transition-all duration-300">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-800 mb-2">Soal Berhasil Disimpan!</h3>
            <p class="text-gray-600 mb-6">Perubahan soal telah tersimpan ke database</p>
            <button onclick="closeModal()" class="w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-2 px-4 rounded-xl hover:from-indigo-600 hover:to-purple-700 transition-all duration-200">
                Tutup
            </button>
        </div>
    </div>

    <script>
        // Static question database for simulation
        let questionDatabase = [
            {
                id: 1,
                question: "Apa ibu kota Indonesia?",
                options: {
                    A: "Surabaya",
                    B: "Jakarta", 
                    C: "Bandung",
                    D: "Medan"
                },
                correctAnswer: "B"
            },
            {
                id: 2,
                question: "Siapa presiden pertama Indonesia?",
                options: {
                    A: "Suharto",
                    B: "Soekarno",
                    C: "B.J. Habibie", 
                    D: "Megawati"
                },
                correctAnswer: "B"
            },
            {
                id: 3,
                question: "Berapa jumlah pulau di Indonesia?",
                options: {
                    A: "13.466",
                    B: "17.508",
                    C: "15.000",
                    D: "20.000"
                },
                correctAnswer: "B"
            }
        ];

        let currentQuestionIndex = 0;

        function updatePreview() {
            const question = document.getElementById('question').value;
            const optionA = document.getElementById('optionA').value;
            const optionB = document.getElementById('optionB').value;
            const optionC = document.getElementById('optionC').value;
            const optionD = document.getElementById('optionD').value;
            const correctAnswer = document.getElementById('correctAnswer').value;

            document.getElementById('previewQuestion').textContent = question || 'Masukkan pertanyaan soal...';

            const options = ['A', 'B', 'C', 'D'];
            const optionValues = [optionA, optionB, optionC, optionD];

            options.forEach((letter, index) => {
                const previewElement = document.getElementById(`previewOption${letter}`);
                const textSpan = previewElement.querySelector('span:last-child');
                textSpan.textContent = optionValues[index] || `Pilihan ${letter}`;

                previewElement.className = 'border-gray-200 bg-gray-50 p-3 rounded-lg border transition-all duration-200';
                previewElement.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span><strong>${letter}.</strong> <span class="ml-2">${optionValues[index] || `Pilihan ${letter}`}</span></span>
                    </div>
                `;

                if (letter === correctAnswer) {
                    previewElement.className = 'bg-gradient-to-r from-green-500 to-green-700 text-white p-3 rounded-lg border-green-500 border transition-all duration-200';
                    previewElement.innerHTML = `
                        <div class="flex items-center justify-between">
                            <span><strong>${letter}.</strong> <span class="ml-2">${optionValues[index] || `Pilihan ${letter}`}</span></span>
                            <span class="text-sm font-medium">‚úì Benar</span>
                        </div>
                    `;
                }
            });

            updateFormStyling(correctAnswer);
        }

        function updateFormStyling(correctAnswer) {
            const options = ['A', 'B', 'C', 'D'];
            
            options.forEach(letter => {
                const input = document.getElementById(`option${letter}`);
                const label = input.previousElementSibling;
                
                if (letter === correctAnswer) {
                    input.className = 'w-full border-green-400 rounded-lg bg-green-50 p-2 focus:ring-green-300 focus:border-green-300 transition-all duration-200 focus:-translate-y-px focus:shadow-md';
                    label.innerHTML = `Pilihan ${letter} <span class="text-green-600 font-semibold">(Benar)</span>`;
                } else {
                    input.className = 'w-full border-gray-300 rounded-lg bg-gray-50 p-2 focus:ring-indigo-300 focus:border-indigo-300 transition-all duration-200 focus:-translate-y-px focus:shadow-md';
                    label.textContent = `Pilihan ${letter}`;
                }
            });
        }

        function loadQuestion(index) {
            if (index < 0 || index >= questionDatabase.length) return;
            
            const question = questionDatabase[index];
            
            document.getElementById('question').value = question.question;
            document.getElementById('optionA').value = question.options.A;
            document.getElementById('optionB').value = question.options.B;
            document.getElementById('optionC').value = question.options.C;
            document.getElementById('optionD').value = question.options.D;
            document.getElementById('correctAnswer').value = question.correctAnswer;
            
            updateNavigationDisplay();
            
            // Apply fade-in animation to preview
            const previewCard = document.querySelector('.animate-fadeIn');
            previewCard.classList.remove('animate-fadeIn');
            void previewCard.offsetWidth; // Trigger reflow
            previewCard.classList.add('animate-fadeIn');
            
            updatePreview();
        }

        function nextQuestion() {
            if (currentQuestionIndex < questionDatabase.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
            }
        }

        function updateNavigationDisplay() {
            const prevBtn = document.querySelector('.nav-prev');
            const nextBtn = document.querySelector('.nav-next');
            const questionCounter = document.querySelector('.question-counter');
            
            questionCounter.textContent = `Soal ${currentQuestionIndex + 1} dari ${questionDatabase.length}`;
            
            if (currentQuestionIndex === 0) {
                prevBtn.classList.add('opacity-50', 'cursor-not-allowed');
                prevBtn.classList.remove('hover:text-indigo-700');
            } else {
                prevBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                prevBtn.classList.add('hover:text-indigo-700');
            }
            
            if (currentQuestionIndex === questionDatabase.length - 1) {
                nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
                nextBtn.classList.remove('hover:text-indigo-700');
            } else {
                nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                nextBtn.classList.add('hover:text-indigo-700');
            }

            updateQuestionListButtons();
        }

        function updateQuestionListButtons() {
            const questionBtns = document.querySelectorAll('.question-btn');
            questionBtns.forEach((btn, index) => {
                if (index === currentQuestionIndex) {
                    btn.className = 'question-btn px-4 py-2 rounded-lg border-2 border-indigo-600 bg-indigo-600 text-white transition-all duration-200';
                } else {
                    btn.className = 'question-btn px-4 py-2 rounded-lg border-2 border-gray-300 text-gray-700 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200';
                }
            });
        }

        function selectQuestion(index) {
            currentQuestionIndex = index;
            loadQuestion(currentQuestionIndex);
        }

        function saveQuestion() {
            const questionData = {
                id: questionDatabase[currentQuestionIndex].id,
                question: document.getElementById('question').value,
                options: {
                    A: document.getElementById('optionA').value,
                    B: document.getElementById('optionB').value,
                    C: document.getElementById('optionC').value,
                    D: document.getElementById('optionD').value
                },
                correctAnswer: document.getElementById('correctAnswer').value
            };

            questionDatabase[currentQuestionIndex] = questionData;
            
            console.log('Saving question:', questionData);
            console.log('Updated database:', questionDatabase);
            
            document.getElementById('successModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('successModal').classList.add('hidden');
        }

        function goBack() {
            alert('Kembali ke Dashboard (dalam aplikasi nyata akan redirect)');
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadQuestion(0);
        });
    </script>

    <style>
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .animate-fadeIn {
            animation: fadeIn 0.3s ease-in-out;
        }
    </style>
</body>
</html>